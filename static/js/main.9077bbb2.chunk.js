(this["webpackJsonptirish.github.io"]=this["webpackJsonptirish.github.io"]||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(19),s=n.n(c),o=(n(26),n(27),n(13)),l=n(3),i=n(0);function u(){return Object(i.jsx)("div",{children:Object(i.jsx)("ul",{children:Object(i.jsx)("li",{children:Object(i.jsx)("a",{href:"https://github.com/tirish",target:"_blank",children:"Github"})})})})}var d=n(2),j=n(8),b=n(14),m=n(10),h=n(9),p=window.localStorage||{};function O(e,t){p[e]=JSON.stringify(t)}function g(e){var t=p[e];try{return JSON.parse(t)}catch(n){return t}}n(29),n(30);function x(e){var t=e.onClick,n=e.className,a=e.children;return Object(i.jsx)("button",{type:"button",className:"ButtonLink-btn ".concat(n),onClick:t,children:a})}var f=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).onChange=function(e){var t,n=(null===e||void 0===e||null===(t=e.currentTarget)||void 0===t?void 0:t.value)||"";a.setState({rawValue:n})},a.onSave=function(){var e,t,n=(a.state.rawValue||"").trim();null===(e=(t=a.props).onSave)||void 0===e||e.call(t,n),a.setState({isEditMode:!1})},a.setEditMode=function(e){e?a.setState({rawValue:a.props.rawValue||"",isEditMode:!0}):a.setState({isEditMode:!1})},a.render=function(){return a.state.isEditMode?Object(i.jsxs)("div",{className:"QueueTextbox-editmode",children:[Object(i.jsx)("input",{className:"QueueTextbox-textbox",type:"text",value:a.state.rawValue,onChange:function(e){return a.onChange(e)},placeholder:a.props.placeholder}),Object(i.jsxs)("span",{className:"QueueTextbox-buttonbar",children:[Object(i.jsx)(x,{onClick:function(){return a.onSave()},children:"Save"})," | ",Object(i.jsx)(x,{onClick:function(){return a.setEditMode(!1)},children:"Cancel"})]})]}):Object(i.jsxs)("div",{className:"QueueTextbox-displaymode",children:[Object(i.jsx)("span",{className:"QueueTextbox-display",children:a.props.display||""}),Object(i.jsx)(x,{className:"QueueTextbox-editlink",onClick:function(){return a.setEditMode(!0)},children:a.props.display?"Edit":"Set"})]})},a.state={rawValue:"",isEditMode:!1},a}return n}(a.Component),v=function(e){var t={hide:!1,myQueue:{}},n=g(e)||{};return Object.assign(t,n),t},y=function(e,t){if(!e)return"";var n=new Date(e);return t?n.toLocaleString("en-US",{timeZone:"UTC"}):n.toLocaleString("en-US")},S=["3090","3080 Ti","3080","3070 Ti","3070","3060 Ti","3060","Misc"],N=function(e){for(var t=0;t<S.length;t++)if(e.name.indexOf(S[t])>=0)return S[t];return"Misc"},w=/^(\d{1,2}\/\d{1,2}\/\d{4}\s+\d{1,2}:\d{2}:\d{2}\s+[AP]M)(?:\s+PT)$/,k=function(e,t){if((e=e||{}).raw){var n=e.raw.match(w);if(n&&n.length){var a=n[1]+" GMT+0000",r=new Date(a);if(e.display=r.toLocaleString("en-US",{timeZone:"UTC"}),t){var c=new Date(t),s=r.valueOf()-c.valueOf(),o=s/1e3/60,l="min";o>=60&&(o/=60,l="hr"),o>=24&&(o/=24,l="days"),o=o<10?o.toPrecision(2):Math.floor(o),o="(".concat(s>0?"+":"").concat(o," ").concat(l,")"),s<0?e.display="Notify Sent "+o:e.display+=" "+o}}else e.raw="",e.display=""}else e.display="";return e},C=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).refreshData=function(){var e=Object(b.a)(a);fetch("https://e35-queue-tracker-api.herokuapp.com/product/?sortBy=sku:desc").then((function(e){return e.json()})).then((function(t){t=t.map((function(e){return{sku:e.sku,name:e.name,productLink:"https://www.evga.com/products/product.aspx?pn="+e.sku,timestamp:y(e.timestampNA,!0),timestampNA:e.timestampNA,updated:(t=e.updatedAt,t?new Date(t).toLocaleDateString("en-US"):""),hide:!!v(e.sku).hide||!e.timestampNA,myQueue:k(v(e.sku).myQueue,e.timestampNA),category:N(e)};var t})),e.setState({data:t,error:!1,lastRefresh:y(new Date)})})).catch((function(){return e.setState({error:!0})})).finally((function(){return e.setState({loading:!1})}))},a.componentDidMount=function(){a.refreshData()},a.toggleShowHidden=function(){a.setState((function(e){return{showHidden:!e.showHidden}}))},a.toggleSku=function(e){var t=v(e);t.hide=!t.hide,O(e,t);var n=a.state.data.map((function(n){return n.sku===e?Object(d.a)(Object(d.a)({},n),{},{hide:t.hide}):n}));a.setState({data:n})},a.updateMyQueue=function(e,t){var n=v(e);n.myQueue=n.myQueue||{},n.myQueue.raw=t,O(e,n);var r=a.state.data.map((function(n){return n.sku===e?Object(d.a)(Object(d.a)({},n),{},{myQueue:k(Object(d.a)(Object(d.a)({},n.myQueue),{},{raw:t}),n.timestampNA)}):n}));a.setState({data:r})},a.renderCategoryRows=function(e){var t=a.state.data.filter((function(t){return t.category===e})).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{show:!e.hide||a.state.showHidden})}));return t.some((function(e){return e.show}))?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("tr",{className:"EvgaQueue-table-category-row",children:Object(i.jsx)("th",{colSpan:6,children:e})}),t.map((function(e){return e.show&&Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:Object(i.jsx)("a",{href:e.productLink,target:"_blank",rel:"noreferrer",children:e.sku})}),Object(i.jsx)("td",{children:e.name}),Object(i.jsx)("td",{children:e.timestamp}),Object(i.jsx)("td",{children:Object(i.jsx)(f,{rawValue:e.myQueue.raw,display:e.myQueue.display,onSave:function(t){return a.updateMyQueue(e.sku,t)},placeholder:"M/d/yyyy h:mm:ss aa PT"})}),Object(i.jsx)("td",{children:e.updated}),Object(i.jsx)("td",{children:Object(i.jsx)(x,{onClick:function(){return a.toggleSku(e.sku)},children:e.hide?"Show":"Hide"})})]},e.sku)}))]}):Object(i.jsx)(i.Fragment,{})},a.render=function(){return a.state.loading?Object(i.jsx)("span",{children:"Loading..."}):a.state.error?Object(i.jsx)("span",{children:"Encountered error"}):Object(i.jsxs)("div",{className:"EvgaQueue-container",children:[Object(i.jsxs)("table",{className:"EvgaQueue-table",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Part Number"}),Object(i.jsx)("th",{children:"Name"}),Object(i.jsx)("th",{children:"Queue Timestamp (PT)"}),Object(i.jsx)("th",{children:"My Queue (PT)"}),Object(i.jsx)("th",{children:"Last Update"}),Object(i.jsx)("th",{children:"Toggle"})]})}),Object(i.jsx)("tbody",{children:S.map((function(e){return a.renderCategoryRows(e)}))})]}),Object(i.jsx)("div",{className:"EvgaQueue-showhidden-toggle-container",children:Object(i.jsx)(x,{className:"EvgaQueue-showhidden-toggle",onClick:function(){return a.toggleShowHidden()},children:a.state.showHidden?"Hide hidden items":"Show hidden items"})}),Object(i.jsxs)("div",{className:"EvgaQueue-footer",children:[Object(i.jsx)("div",{className:"EvgaQueue-footer-datasource",children:Object(i.jsxs)("small",{children:["Data source: ",Object(i.jsx)("a",{href:"https://www.element35gaming.com/",target:"_blank",rel:"noreferrer",children:"https://www.element35gaming.com/"})]})}),Object(i.jsx)("div",{className:"EvgaQueue-footer-timer",children:Object(i.jsxs)("small",{children:["Last refresh: ",a.state.lastRefresh]})})]})]})},a.state={loading:!0,showHidden:!1},a}return n}(a.Component),P=n(21),T=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onSelect=function(t){var n,a;null===(n=(a=e.props).onSelect)||void 0===n||n.call(a,t)},e.render=function(){var t=e.props,n=t.options,a=t.name,r=t.selected;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"input-group input-group-lg",children:n.map((function(e){return Object(i.jsx)("label",{className:"btn btn-".concat(r===e.value?"success":"outline-primary"),htmlFor:"".concat(a,"-").concat(e.value),children:e.label},e.value)}))}),Object(i.jsx)("div",{children:n.map((function(t){return Object(i.jsx)("input",{type:"radio",className:"btn-check",name:a,id:"".concat(a,"-").concat(t.value),autoComplete:"off",checked:r===t.value,onChange:function(){return e.onSelect(t)}},t.value)}))})]})},e}return n}(a.Component),Q=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(j.a)(this,n),(a=t.call(this,e)).onPlayerCountSelect=function(e){if(null===e||void 0===e?void 0:e.value){var t=!!e.label;"more"===e.value?a.setState((function(e){return{players:e.moreValue,more:!0}})):a.setState({players:Number(e.value),more:!t})}},a.onSetupComplete=function(){var e,t;null===(e=(t=a.props).onSetupComplete)||void 0===e||e.call(t,{names:a.state.names,playTo:a.state.playTo})},a.onMoreUpdate=function(e){var t=e?Number(e):0;a.setState({moreValue:e,players:t})},a.onNameUpdate=function(e,t){a.setState((function(n){return{names:n.names.map((function(n,a){return a===t?e:n}))}}))},a.gotoNextStep=function(){var e=a.state.stage;"players"===e?a.state.players>0&&a.state.players<=20&&a.setState((function(e){for(var t=new Array(a.state.players).fill(""),n=0;n<t.length&&e.names.length;n++)t[n]=e.names[n]||"";return{stage:"names",names:t}})):"names"===e&&(a.state.names.some((function(e){return!(e||"").trim()}))||a.setState({stage:"confirm"}))},a.gotoPrevStep=function(){var e=a.state.stage;"names"===e&&a.setState({stage:"players"}),"confirm"===e&&a.setState({stage:"names"})},a.render=function(){if("players"===a.state.stage)return a.renderPlayerSelection();if("names"===a.state.stage)return a.renderNameSelection();var e=a.state.players>1?"s":"";return Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{children:"Confirm"}),Object(i.jsxs)("p",{children:[a.state.players," player",e]}),Object(i.jsxs)("h4",{children:["Player Name",e]}),Object(i.jsxs)("table",{className:"table table-dark",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"col",children:"#"}),Object(i.jsx)("th",{scope:"col",children:"Name"})]})}),Object(i.jsx)("tbody",{children:a.state.names.map((function(e,t){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"row",children:t+1}),Object(i.jsx)("td",{children:e})]},t)}))})]}),Object(i.jsxs)("div",{className:"mt-4 input-group",children:[Object(i.jsx)("button",{type:"button",className:"btn btn-dark",onClick:a.gotoPrevStep,children:"Back"}),Object(i.jsx)("button",{type:"button",className:"btn btn-warning",onClick:a.onSetupComplete,children:"Confirm"})]})]})},a.renderNameSelection=function(){var e=a.state.names,t=e.some((function(e){return!(e||"").trim()}));return Object(i.jsxs)("div",{children:[Object(i.jsxs)("h3",{children:["Player Names (",a.state.players,")"]}),e.map((function(e,t){return Object(i.jsxs)("div",{className:"input-group mb-3",children:[Object(i.jsx)("span",{className:"input-group-text",children:t+1}),Object(i.jsx)("input",{type:"text",className:"form-control",value:e,onChange:function(e){return a.onNameUpdate(e.currentTarget.value,t)}})]},t)})),Object(i.jsxs)("div",{className:"mt-4 input-group",children:[Object(i.jsx)("button",{type:"button",className:"btn btn-dark",onClick:a.gotoPrevStep,children:"Back"}),Object(i.jsx)("button",{type:"button",className:"btn btn-dark",disabled:t,onClick:a.gotoNextStep,children:"Next"})]})]})},a.renderPlayerSelection=function(){var e=a.state.more?"more":a.state.players;return Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{children:"Number of Players"}),Object(i.jsx)(T,{options:[{label:"One (1)",value:1},{label:"Two (2)",value:2},{label:"Three (3)",value:3},{label:"Four (4)",value:4},{label:"More?",value:"more"}],selected:e,onSelect:a.onPlayerCountSelect}),a.state.more?Object(i.jsxs)("div",{class:"mt-3",children:[Object(i.jsx)("label",{for:"morePlayers",class:"form-label",children:"More Players"}),Object(i.jsx)("input",{type:"number",class:"form-control",id:"morePlayers",value:a.state.moreValue,onChange:function(e){return a.onMoreUpdate(e.currentTarget.value)}}),a.state.players<=0||a.state.players>20?Object(i.jsx)("small",{children:"Must be between 1 and 20 (inclusive)"}):null]}):null,Object(i.jsx)("div",{className:"mt-4",children:Object(i.jsx)("button",{type:"button",className:"btn btn-dark",disabled:a.state.players<=0||a.state.players>20,onClick:a.gotoNextStep,children:"Next"})})]})};var r=e.initialNames||[];return a.state={players:r.length,names:r,playTo:100,more:!1,moreValue:5,stage:r.length>0?"confirm":"players"},a}return n}(a.Component),M=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).onSetupComplete=function(e){var t={playTo:e.playTo,players:e.names.map((function(e){return{name:e,score:0}})),currentPlayer:0,roundPlays:[],mode:g("pig_scoring_mode")||"basic",endOfTurn:!1};a.setState({game:t,stage:"normal_play"}),O("pig_players",e.names)},a.onModeChange=function(e){var t=e.value;a.setState((function(e){return Object(d.a)(Object(d.a)({},e),{},{game:Object(d.a)(Object(d.a)({},e.game),{},{mode:t})})})),O("pig_scoring_mode",t)},a.addRoundScore=function(e,t){a.setState((function(n){return Object(d.a)(Object(d.a)({},n),{},{game:Object(d.a)(Object(d.a)({},n.game),{},{endOfTurn:t,roundPlays:Object(P.a)(n.game.roundPlays).concat([e])})})}))},a.undo=function(){a.state.game.roundPlays.length>0&&a.setState((function(e){return Object(d.a)(Object(d.a)({},e),{},{game:Object(d.a)(Object(d.a)({},e.game),{},{roundPlays:e.game.roundPlays.slice(0,-1),endOfTurn:!1})})}))},a.getRoundScore=function(){return a.state.game.roundPlays.length>0?a.state.game.roundPlays.reduce((function(e,t){return e+t}),0):0},a.onOinkerOrPigOut=function(e){var t=a.state.game.players[a.state.game.currentPlayer],n=a.getRoundScore(),r=(e?t.score:0)+n;a.addRoundScore(-1*r,!0)},a.onTurnComplete=function(){var e=a.getRoundScore();a.setState((function(t){var n=!1,a=Object(d.a)(Object(d.a)({},t),{},{game:Object(d.a)(Object(d.a)({},t.game),{},{roundPlays:[],endOfTurn:!1,players:t.game.players.map((function(a,r){if(t.game.currentPlayer===r){var c=a.score+e,s="final_round"===t.stage;return c>=t.game.playTo&&(n=!0,s=!0),Object(d.a)(Object(d.a)({},a),{},{score:c,isFinalScore:s,finalRoundStarter:n&&"final_round"!==t.stage})}return a}))})});if(a.game.currentPlayer=(a.game.currentPlayer+1)%a.game.players.length,n&&(a.stage="final_round"),a.game.players[a.game.currentPlayer].finalRoundStarter){a.stage="game_over";for(var r=0,c=-1,s=0;s<a.game.players.length;s++){var o=a.game.players[s];o.score>c&&(c=o.score,r=s)}a.game.winnerIdx=r}return a}))},a.onNewGame=function(){a.setState({game:null,stage:"setup"})},a.renderAdvancedScoring=function(){var e=function(e){return Object(i.jsx)("div",{className:"col",children:Object(i.jsx)("button",{type:"button",className:"btn btn-lg btn-dark w-100",onClick:function(){return a.addRoundScore(e)},disabled:a.state.game.endOfTurn,children:"+".concat(e)})})};return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"row mb-3",children:[e(1),e(5),e(10)]}),Object(i.jsxs)("div",{className:"row mb-3",children:[e(15),e(20),e(25)]}),Object(i.jsxs)("div",{className:"row mb-3",children:[e(40),e(60)]}),Object(i.jsxs)("div",{className:"row mb-3",children:[Object(i.jsx)("div",{className:"col",children:Object(i.jsx)("button",{type:"button",className:"btn btn-lg btn-warning w-100",onClick:function(){return a.onOinkerOrPigOut(!1)},disabled:a.state.game.endOfTurn,children:"Pig Out (Reset Round)"})}),Object(i.jsx)("div",{className:"col",children:Object(i.jsx)("button",{type:"button",className:"btn btn-lg btn-danger w-100",onClick:function(){return a.onOinkerOrPigOut(!0)},disabled:a.state.game.endOfTurn,children:"Oinker (Reset Total Score)"})})]}),Object(i.jsx)("div",{className:"row mt-5",children:Object(i.jsx)("div",{className:"col",children:Object(i.jsx)("button",{type:"button",className:"btn btn-lg btn-success w-100",onClick:function(){return a.onTurnComplete()},children:"End Turn"})})})]})},a.render=function(){var e=a.state,t=e.stage,n=e.game;if("setup"===t){var r=g("pig_players");return Object(i.jsx)(Q,{onSetupComplete:a.onSetupComplete,initialNames:r})}var c=a.renderScoreboard(),s=n.players[n.currentPlayer],o=a.getRoundScore(),l="game_over"===t?n.players[n.winnerIdx]:null;return Object(i.jsxs)("div",{children:["game_over"!==t&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h3",{children:"Scoring Mode"}),Object(i.jsx)(T,{options:[{label:"Beginner",value:"basic"},{label:"Advanced",value:"adv"}],selected:a.state.game.mode,onSelect:a.onModeChange}),Object(i.jsxs)("div",{className:"mt-3",children:["adv"===a.state.game.mode&&a.renderAdvancedScoring(),"basic"===a.state.game.mode&&Object(i.jsx)("span",{children:"Coming soon! Until then, use Advanced scoring."})]}),Object(i.jsxs)("div",{className:"mt-4",children:[Object(i.jsxs)("h1",{children:["Current Player: ",s.name,"final_round"===t?" (Final Round)":""]}),Object(i.jsxs)("p",{children:[s.name," has ",Object(i.jsx)("strong",{children:o})," so far for this round. ",n.roundPlays.length>0&&Object(i.jsxs)("span",{children:["After this round, total score will be ",Object(i.jsx)("em",{children:o+s.score})]})]}),n.roundPlays.length>0&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("ol",{children:n.roundPlays.map((function(e,t){return Object(i.jsx)("li",{children:e},t)}))}),Object(i.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:a.undo,children:"Undo"})]})]})]}),!("game_over"!==t||!l)&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("h1",{children:["Winner! ",l.name]}),Object(i.jsxs)("p",{children:["Score: ",Object(i.jsx)("strong",{children:l.score})]})]}),Object(i.jsx)("hr",{}),Object(i.jsx)("h3",{children:"Scores"}),c,Object(i.jsx)("div",{className:"mt-4",children:Object(i.jsx)("button",{type:"button",className:"btn btn-outline-warning",onClick:a.onNewGame,children:"New Game"})})]})},a.renderScoreboard=function(){return Object(i.jsxs)("table",{className:"table table-dark",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"col",children:"#"}),Object(i.jsx)("th",{scope:"col",children:"Name"}),Object(i.jsx)("th",{scope:"col",children:"Score"})]})}),Object(i.jsx)("tbody",{children:a.state.game.players.map((function(e,t){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"row",children:t+1}),Object(i.jsx)("td",{children:e.name}),Object(i.jsxs)("td",{children:[e.score,e.isFinalScore?" (Final)":""]})]},t)}))})]})},a.state={stage:"setup",game:null},a}return n}(a.Component);var E=function(){return Object(i.jsx)(o.a,{children:Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("header",{className:"App-header",children:Object(i.jsx)("nav",{children:Object(i.jsxs)("ul",{children:[Object(i.jsx)("li",{children:Object(i.jsx)(o.b,{to:"/",children:"Home"})}),Object(i.jsx)("li",{children:Object(i.jsx)(o.b,{to:"/evgaQueue",children:"EVGA Queue"})}),Object(i.jsx)("li",{children:Object(i.jsx)(o.b,{to:"/pigs",children:"Pig Game"})})]})})}),Object(i.jsx)("section",{className:"App-content",children:Object(i.jsxs)(l.c,{children:[Object(i.jsx)(l.a,{path:"/pigs",children:Object(i.jsx)(M,{})}),Object(i.jsx)(l.a,{path:"/evgaQueue",children:Object(i.jsx)(C,{})}),Object(i.jsx)(l.a,{path:"/",children:Object(i.jsx)(u,{})})]})})]})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(E,{})}),document.getElementById("root")),A()}},[[39,1,2]]]);
//# sourceMappingURL=main.9077bbb2.chunk.js.map